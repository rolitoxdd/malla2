<!DOCTYPE HTML>
<html lang="es-CL">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140369062-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-140369062-1');
    gtag('config', 'G-5DNPHG462W')
  </script>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-M5LWCHD');</script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Primary Meta Tags -->
  <title>Malla interactiva | Calculadora de Prioridad</title>
  <meta name="title" content="Malla interactiva | Calculadora de Prioridad">
  <meta name="description" content="Calculadora a veces incluso más precisa que SIGA">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://csarman.github.io/malla-interactiva/prioridad/">
  <meta property="og:title" content="Malla interactiva | Calculadora de Prioridad">
  <meta property="og:description" content="Calculadora a veces incluso más precisa que SIGA">
  <meta property="og:image" content="https://csarman.github.io/malla-interactiva/social-image.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">

  <!-- CSS, Fonts and some scripts -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/darkMode.css" media="(prefers-color-scheme: dark)">
  <link rel="stylesheet" href="../css/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
  <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script defer src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
  <script
          defer
          src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"
          integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH"
          crossorigin="anonymous">
  </script>

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
  <link rel="manifest" href="../site.webmanifest">
  <link rel="mask-icon" href="../safari-pinned-tab.svg" color="#2f58a7">
  <meta name="apple-mobile-web-app-title" content="Malla Interactiva">
  <meta name="application-name" content="Malla Interactiva">
  <meta name="msapplication-TileColor" content="#2f58a7">
  <meta name="theme-color" content="#f8f9fa">

<!--  Preload-->
  <link rel="preload" href="../js/min2.js" as="script">
  <link rel="preload" href="../views/header.html" as="document">
  <link rel="preload" href="../views/footer.html" as="document">
<!--  <link rel="preload" href="../data/carreras.json" as="fetch">-->
  <link rel="preconnect" href="https://kit-free.fontawesome.com/">
</head>
<body class="d-flex flex-column">
<!-- En verdad, lamento la cantidad horrorosa de divs -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M5LWCHD"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<div role="alert" style="position: fixed; top: 20px; right: 20px;" aria-live="assertive" aria-atomic="true" class="toast" data-autohide="false">
  <div class="toast-header">
    <strong class="mr-auto">Algunos ramos ya no existen en la malla</strong>
    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="toast-body">
    Debido a un cambio reciente en la malla, algunos ramos no se pudieron encontrar... Se ha creado una lista con los ramos sin encontrar y sus notas al final de la página
  </div>
</div>


<!-- Agregar ramo personalizado -->
<div class="modal fade"
     id="modalCreateSubject"
     tabindex="-1"
     role="dialog"
     aria-labelledby="CreateSubject"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="">Añadir asignatura fuera de la malla</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="custom-name">Nombre asignatura</label>
          <input type="text"
                 class="form-control"
                 id="custom-name"
                 autocomplete="off"
                 placeholder="Introducción a la malla interactiva"
                 required>
        </div>
        <div class="form-group">
          <label for="custom-sigla">Sigla asignatura</label>
          <input type="text" class="form-control" autocomplete="off" id="custom-sigla" placeholder="INF-123" required>
          <small id="custom-sigla-Help" class="form-text text-muted">
            Asegurate de que la sigla NO contenga espacios. Por favor seguir formato del ejemplo
          </small>
        </div>
        <div class="form-group">
          <label for="custom-credits-USM">Créditos USM</label>
          <input type="number" inputmode="numerical" autocomplete="off" class="form-control" id="custom-credits-USM" required pattern="[1-9]+" placeholder="Ingrese un valor">
          <small id="custom-credits-USM-help" class="form-text text-muted">
            Obligatorio
          </small>
        </div>
        <div class="form-group">
          <label for="custom-credits-SCT">Créditos SCT</label>
          <input type="number" inputmode="numerical" autocomplete="off" class="form-control" id="custom-credits-SCT" pattern="[1-9]+" placeholder="Ingrese un valor">
          <small id="custom-credits-SCT-help" class="form-text text-muted">
            Si esta entrada no se llena, los créditos se calcularan con relación a los créditos USM
          </small>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" id="createSubject" class="btn btn-primary button-create-subject" data-dismiss="modal">Agregar</button>
      </div>
    </div>
  </div>
</div>
<!-- fin ramo -->

<!-- Instructions modal -->
<div class="modal fade" id="instructions" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Instrucciones</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body ">
        <h3>Como Usar la calculadora</h3>
        <div class="text-center">
        <svg><use href="#subjectExample" style="cursor: default"></use> </svg>
        </div>
        <p>Selecciona una asignatura de la malla y anota la nota que obtuviste en el asignatura para obtener tu prioridad. Puedes pulsar el semestre en la malla para agregar todos los ramos de dicho semestre a la calculadora</p>
        <p>Usa las flechas <span class="btn-card btn btn-primary disabled"><i class="fas fa-arrow-left"></i></span> <span class="btn-card btn btn-primary disabled"><i class="fas fa-arrow-right"></i></span>
          para cambiar de semestre. Cada vez que cambies una nota, el cambio quedará guardado en cache para la próxima vez que ingreses</p>
        <p>El <strong>FAE</strong> o <strong>Factor de Actividades Extracurriculares</strong> corresponde a un número que bonifica
          tu prioridad de acuerdo a tus actividades extra académicas que la Universidad vea como positivas. El valor por defecto es 1</p>
      </div>
      <div class="modal-body">
        <h3>Calculo Prioridad</h3>
        <p>
          La formula de prioridad, según este
          <a href="#https://usmtransparente.usm.cl/docs/reglamentos/070.2015%20DECRETO%20-%20Mod%20Regl%20Gral%20N°1%20refundido%20ok.pdf">reglamento</a> de la U,
          se calcula de la siguiente forma:
        </p>
        <p style="overflow: auto">
        $$\text{Prioridad} = 100\cdot\frac{\sum{\text{Nota Asignatura} \cdot \text{Créditos Asignatura}}}{14 \cdot \text{semestre}^{1.06}} \cdot \frac{\text{Créditos Aprobados}}{\text{Créditos Tomados Totales}} \cdot \text{FAE}$$
        </p>
        <p>
          Durante el segundo semestre de 2019 y principios del primero de 2020, la universidad empezó a trabajar con los créditos SCT
           y con ello se modificó la formula, pues esta está pensada para créditos USM. Esto se sabe puesto que hasta el día de hoy,
          la plataforma SIGA muestra una prioridad que difiere de la calculada por la formula del reglamento,
          <strong>referenciado en la mismísima página de inicio de sesión del SIGA</strong> La formula de abajo corresponde a una suposición propia.
        </p>
        <p style="overflow: auto">
          $$\text{Prioridad Nueva} = 100\cdot\frac{\sum{\text{Nota Asignatura} \cdot \text{Créditos SCT Asignatura}}}{14 \cdot \frac{5}{3} \cdot \text{semestre}^{1.06}} \cdot \frac{\text{Créditos SCT Aprobados}}{\text{Créditos SCT Tomados Totales}} \cdot \text{FAE}$$
        </p>
        <p>Para efectos de la calculadora, si la malla no tiene información de los créditos SCT, este se calcula a partir de los créditos USM y luego se redondea</p>
        <p>$$ 1 \text{ crédito SCT} = 1 \text{ crédito USM} \cdot \frac{5}{3}$$</p>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
<!-- -->

<div id="overlay" class="overlay" onclick="removePopUp()">
  <div class="overlay-content" onclick="removePopUp()">
    <div class="container-fluid align-middle py-5">
      <div class="row justify-content-center  align-items-center">
        <div class="col col-md-8 col-xl-6 text-center">
          <h1>¡Bienvenido!</h1>
          <svg  class="py-3 pt-md-5 pb-md-2" style="min-height: 100px" >
            <use href="#subjectExample"></use>
          </svg>
          <div class="pb-3">
            <div class="btn-card btn btn-primary disabled" style="pointer-events: none" disabled="disabled">
              <i class="fas fa-arrow-left"></i>
            </div>
            <div class="btn-card btn btn-primary disabled" style="pointer-events: none" disabled="disabled">
              <i class="fas fa-arrow-right"></i>
            </div>
          </div>
          <h5 style="max-width: 500px" class="mx-auto">Si alcanzas a leer este texto, seguramente la malla aún esta cargando u ocurrió un problema y tienes que refrescar la página...</h5>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- Header -->
<header data-include="header"></header>
<!-- Header END -->

<!--<div class=" alert alert-warning text-center alert-dismissible fade show" role="alert">
  <div class="container">
    El cálculo de la nueva prioridad basada en créditos <strong>SCT</strong> en estos momentos no es muy precisa. Para ayudar en la
    disminución del error, informen mediante este
    <a class="alert-link" referrerpolicy="origin" href="https://docs.google.com/forms/d/e/1FAIpQLSc7im-tmzXlWhHYb5XmRhIMGTLQ5GUZj4haRq8iSECYsuXU8A/viewform?usp=sf_link" target="_blank">formulario</a>
    las asignaturas que tienen créditos <strong>SCT</strong> distintos a los que se muestran en este sitio.
  </div>
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>-->

<!-- Main  -->
<section class="container-fluid flex-grow-1">
  <!-- Canvas -->
  <div class="row justify-content-center align-items-center">
    <div class="col-xl-7 order-1">
      <div class='canvas pt-3'></div>
    </div>
    <!-- Canvas END -->
    <!-- Calculadora -->
    <div class="col-sm-auto order-xl-2 order-4">
      <form id="priorix" class="d-flex flex-column">
        <div class="card flex-fill">
          <div class="card-header">
            <div class="row no-gutters">
              <div class="col align-self-center">
                <h4 class="text-center align-middle mb-0">
                  Calculadora de prioridad
                </h4>
              </div>
              <div class="col-auto">
                <button  class="btn btn-secondary" data-toggle="modal" data-target="#instructions" type="button"><i class="fas fa-question"></i></button>
              </div>
            </div>
          </div>
          <div class="card-body p-0">
            <div class="card-sticky-top">
              <div class="row no-gutters justify-content-between pt-2 mb-auto">
                <div class="col-auto pl-3 align-items-center">
                  <div style="font-size: small" class="badge badge-pill badge-info text-left">
                    Semestre Nº <span id="semester"></span>
                  </div>
                </div>
                <div class="col-sm-4 pr-3 col-6 text-right">
                  <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                      <span class="input-group-text">FAE: </span>
                    </div>
                    <input type="number" inputmode="number" step="0.001" autocomplete="off" class="form-control fae" value="1">
                  </div>
                </div>
                <hr class="w-100 mt-2 m-0">

              </div>
            </div>
            <!-- Aqui van los ramos seleccionados -->
            <div class="subjectContainer d-flex flex-column">
              <span class="subjects p-3"></span>

            <div class=" card-text flex-fill d-flex flex-column text-center text-muted">
              <p class="no-subjects my-auto">
                No hay ninguna asignatura seleccionada
              </p>
            </div>

            </div>

            <div class="mt-auto" style="position: -webkit-sticky; position: sticky; bottom: 0;z-index: 1">
              <div class="priorix-result text-center alert alert-info mb-0" role="alert">
                <span class="d-sm-inline d-none"></span> <br class="d-sm-none"> Prioridad: <strong><span class="resSCT">0</span></strong>
              </div>

            </div>
            <hr class="w-100 mt-auto mb-0">
            <div class="text-muted mb-0 text-center py-1 px-3 px-xl-1 w-100">
              <small >
                ¿La asignatura que quieres no esta en la malla? ¡Usa la <a data-scroll href="#unoficialSubjects">tabla de abajo</a>!
              </small>
              <br>
              <small class="mb-0">Usa las flechas de abajo para cambiar de semestre</small>
            </div>
          </div>
          <div class="card-footer  px-3">
            <!-- Botones para cambiar semestre y calcular prioridad -->
            <div class="row no-gutters align-items-center justify-content-between">
              <div class="col-2 text-left">
                <button id="back" type="button" class="btn-card btn btn-primary disabled" disabled="disabled">
                  <i class="fas fa-arrow-left"></i>
                </button>
              </div>
              <div class="col-5 col-sm-8">
                <div class="row justify-content-center no-gutters">
                  <div class="btn-group" role="group">
                    <button type="reset" id="reset" class="btn btn-danger btn-card">
                      Limpiar Semestre
                    </button>
                  </div>
                </div>
                <div class="row justify-content-center">
                  <button id="resetc" type="button" class="btn btn-danger btn-card mt-1">
                    Restablecer Calculadora
                  </button>
                </div>
              </div>
              <div class="col-2 text-right">
                <button id="forward" type="button" class="btn btn-primary btn-card">
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>
          </div>
          <!-- Fin botones -->
        </div>
      </form>

    </div>
    <!-- Calculadora END -->
    <div class='col-12 col-xl-10 order-2 order-xl-3 color-description'></div>
    <div class="col-12 my-3 order-xl-4 order-3 text-center">
      <h5>Mostrando créditos <span id="credits-system"></span></h5>
      <button id="credit-system" type="button" onclick="changeCreditsSystem()" class="btn btn-secondary"> Cambiar sistema de créditos </button>
    </div>
  </div>
  <!-- Ramos Fuera de malla -->
  <div id="unoficialSubjects" class="row justify-content-center mt-5">
    <div class="col-lg-auto">
      <div id="custramo" class="card">
        <div  class="card-header">
          <h3 class="card-title">Asignaturas fuera de la malla oficial</h3>
        </div>
        <div class="table-responsive">
          <table id="customTable" class="card-body table table-hover">
            <thead>
            <tr>
              <th scope="col">Sigla</th>
              <th scope="col">Nombre</th>
              <th scope="col">Créditos</th>
              <th scope="col">Estado</th>
              <th scope="col">Acciones</th>
            </tr>
            </thead>
            <tbody id="customTableContent">
            <!-- Aqui van los ramos fuera de malla -->
            </tbody>
          </table>
        </div>
        <div class="card-footer">
          <button
                  type="button"
                  data-toggle="modal"
                  data-target="#modalCreateSubject"
                  class="btn btn-primary btn-sm button-create-subject">
            Agregar Asignatura
          </button>
          <button
                  id="deleteSubjects"
                  type="button"
                  class="btn btn-danger btn-sm">
            Limpiar Tabla
          </button>

        </div>
      </div>
    </div>
  </div>
  <div id="deletedCard" class="row justify-content-center mt-5 d-none">
    <div class="col-sm-5 col-lg-3">
        <div class="card">
          <div  class="card-header">
            <h3 class="card-title">Asignaturas Eliminadas</h3>
          </div>
          <div id="deletedSubjects" class="card-body">
            <small class="text-muted">
              Nota: Guarda esta lista en otro lugar si quieres tener un respaldo, si haces un cambio en la calculadora, es posible que no puedas volver a ver esta lista
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>

</section>
<!-- Main END -->
<!-- Footer -->
<footer data-include="footer"  class="container-fluid text-center mt-3">
</footer>
<!-- Footer END -->

<!-- svg ramo -->
<div class="d-none">
  <svg id="subjectExample" xmlns="http://www.w3.org/2000/svg" width="300" height="100"   font-family="  -apple-system,   BlinkMacSystemFont,   &quot;Segoe UI&quot;,   &quot;Roboto&quot;,   &quot;Helvetica Neue&quot;, Arial, sans-serif,   &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">
    <style type="text/css">
      .bars {
        fill: grey;
      }
      .text {
        fill: black;
      }
      .line {
        stroke: black;
      }
      @media(prefers-color-scheme: dark) {
        .bars {
          fill: #404040;
        }
        .text {
          fill: white;
        }
        .line {
          stroke: white;
        }
      }
    </style><style><![CDATA[.D{dominant-baseline:middle}.E{font-size:12px}.F{text-anchor:middle}]]></style><path fill="#2e58a7" d="M100 0h100v100H100z"/><path d="M100 0h100v20H100zm0 80h100v20H100z" class="bars" fill="gray"/><circle cx="190" cy="10" r="8" fill="#fff" fill-rule="evenodd"/><circle cy="90" cx="115" r="9" fill="#2e58a7" stroke="#fff"/><path d="M178 80h20v20h-20z" fill="#fff"/><text xml:space="preserve" x="190" y="10" writing-mode="lr-tb" direction="ltr" class="D E F"><tspan x="190" y="10" class="D">2</tspan></text><text xml:space="preserve" x="188" y="90" class="D E F"><tspan id="creditsNumberExample" x="187.639" y="90" class="D">1</tspan></text><text xml:space="preserve" x="115" y="90" fill="#fff" class="D E F"><tspan x="114.979" y="90.391" class="D">1</tspan></text><text xml:space="preserve" x="105" y="10" font-weight="bold" letter-spacing="0" fill="#fff" class="D E"><tspan x="105" y="10" class="D">INF-102</tspan></text><text xml:space="preserve" x="150" y="40" fill="#fff" class="E F"><tspan x="150" y="40" class="D">Mallas</tspan><tspan x="150" y="53.2" class="D">y</tspan><tspan x="150" y="66.4" class="D">Complejidad</tspan></text><text xml:space="preserve" x="92.465" y="11.742" text-anchor="end" class="E text"><tspan x="92.465" y="11.742">Sigla</tspan><tspan x="92.465" y="26.742">Asignatura</tspan></text><text xml:space="preserve" x="209.197" y="16.86" class="E text"><tspan x="209.197" y="16.86">Número</tspan><tspan x="209.197" y="31.86">asignatura</tspan></text><text xml:space="preserve" x="209.326" y="89.117" class="E text"><tspan id="creditsExample" x="209.326" y="89.117">Créditos USM</tspan></text><text xml:space="preserve" x="47.622" y="93.323" class="E F text"><tspan x="47.622" y="93.323">Prerrequisitos</tspan></text><path d="M94 9.4h9m91 2.6h14m-17 75h17m-100 3H92" class="line" stroke="#000"/></svg>
</div>
<!-- fin svg ramo -->

<script src='https://d3js.org/d3.v5.min.js'></script>
<!--<script defer src='../js/min2.js'></script>-->
<script defer src="../js/min2.js"></script>

<!-- Smooth scroll -->
<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>



<script type="text/template" data-template="tab-template1">
  <li><a class="nav-item nav-link" href="?m=${Link}"><span class="d-md-none">Malla </span>${Nombre}</a></li>
</script>
<script type="text/template" data-template="tab-template2">
  <a class="dropdown-item" href="?m=${Link}">Malla ${Nombre}</a>
</script>

<!-- mathJax -->
<script async src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 500,
    easing: 'easeInOutCubic'
  });
</script>
</body>
</html>
